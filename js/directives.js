angular.module("app").directive("uiFullscreen",["uiLoad","$document","$window",function(e,n,t){return{restrict:"AC",template:'<i class="fa fa-expand fa-fw text"></i><i class="fa fa-compress fa-fw text-active"></i>',link:function(t,i,a){i.addClass("hide"),e.load("libs/screenfull.min.js").then(function(){screenfull.enabled&&!navigator.userAgent.match(/Trident.*rv:11\./)&&i.removeClass("hide"),i.on("click",function(){var e;a.target&&(e=$(a.target)[0]),screenfull.toggle(e)}),n.on(screenfull.raw.fullscreenchange,function(){screenfull.isFullscreen?i.addClass("active"):i.removeClass("active")})})}}}]),angular.module("ui.jq",["ui.load"]).value("uiJqConfig",{}).directive("uiJq",["uiJqConfig","JQ_CONFIG","uiLoad","$timeout",function(e,n,t,i){return{restrict:"A",compile:function(a,o){if(!angular.isFunction(a[o.uiJq])&&!n[o.uiJq])throw new Error('ui-jq: The "'+o.uiJq+'" function does not exist');var r=e&&e[o.uiJq];return function(e,a,o){function u(){var n=[];return o.uiOptions?(n=e.$eval("["+o.uiOptions+"]"),angular.isObject(r)&&angular.isObject(n[0])&&(n[0]=angular.extend({},r,n[0]))):r&&(n=[r]),n}function l(){i(function(){a[o.uiJq].apply(a,u())},0,!1)}function s(){o.uiRefresh&&e.$watch(o.uiRefresh,function(){l()})}o.ngModel&&a.is("select,input,textarea")&&a.bind("change",function(){a.trigger("input")}),n[o.uiJq]?t.load(n[o.uiJq]).then(function(){l(),s()}).catch(function(){}):(l(),s())}}}}]),angular.module("app").directive("laydate",function(){return{require:"?ngModel",restrict:"A",scope:{ngModel:"="},link:function(e,n,t,i){function a(){var e=n.val();i.$setViewValue(e)}var o=null,r={};r={elem:"#"+t.id,format:void 0!=t.format&&""!=t.format?t.format:"YYYY-MM-DD hh:mm:ss",max:t.hasOwnProperty("maxDate")?t.maxDate:"",min:t.hasOwnProperty("minDate")?t.minDate:"",choose:function(n){e.$apply(a)},clear:function(){i.$setViewValue(null)}},r.istime=r.format.indexOf("s")>=0,o=laydate(r),i.$render=function(){n.val(i.$viewValue||"")},n.on("click",function(){e.$apply(a)}),a()}}}),angular.module("app").directive("uiNav",["$timeout",function(e){return{restrict:"AC",link:function(e,n,t){var i,a=$(window),o=768,r=$(".app-aside"),u=".dropdown-backdrop";n.on("click","a",function(e){i&&i.trigger("mouseleave.nav");var n=$(this);n.parent().siblings(".active").toggleClass("active"),n.next().is("ul")&&n.parent().toggleClass("active")&&e.preventDefault(),n.next().is("ul")||a.width()<o&&$(".app-aside").removeClass("show off-screen")}),n.on("mouseenter","a",function(e){if(i&&i.trigger("mouseleave.nav"),$("> .nav",r).remove(),!(!$(".app-aside-fixed.app-aside-folded").length||a.width()<o||$(".app-aside-dock").length)){var n,t=$(e.target),l=$(window).height(),s=50,c=150;!t.is("a")&&(t=t.closest("a")),t.next().is("ul")&&(i=t.next(),t.parent().addClass("active"),n=t.parent().position().top+s,i.css("top",n),n+i.height()>l&&i.css("bottom",0),n+c>l&&i.css("bottom",l-n-s).css("top","auto"),i.appendTo(r),i.on("mouseleave.nav",function(e){$(u).remove(),i.appendTo(t.parent()),i.off("mouseleave.nav").css("top","auto").css("bottom","auto"),t.parent().removeClass("active")}),$(".smart").length&&$('<div class="dropdown-backdrop"/>').insertAfter(".app-aside").on("click",function(e){e&&e.trigger("mouseleave.nav")}))}}),r.on("mouseleave",function(e){i&&i.trigger("mouseleave.nav"),$("> .nav",r).remove()})}}}]),angular.module("app").directive("uiScroll",["$location","$anchorScroll",function(e,n){return{restrict:"AC",link:function(t,i,a){i.on("click",function(t){e.hash(a.uiScroll),n()})}}}]),angular.module("app").directive("uiShift",["$timeout",function(e){return{restrict:"A",link:function(n,t,i){function a(){e(function(){var e=i.uiShift,n=i.target;u.hasClass("in")||u[e](n).addClass("in")})}function o(){r&&r.prepend(t),!r&&u.insertAfter(s),u.removeClass("in")}var r,u=$(t),l=$(window),s=u.prev(),c=l.width();!s.length&&(r=u.parent()),c<768&&a()||o(),l.resize(function(){c!==l.width()&&e(function(){l.width()<768&&a()||o(),c=l.width()})})}}}]),angular.module("app").directive("uiToggleClass",["$timeout","$document",function(e,n){return{restrict:"AC",link:function(e,n,t){n.on("click",function(e){function i(e,n){for(var t=new RegExp("\\s"+e.replace(/\*/g,"[A-Za-z0-9-_]+").split(" ").join("\\s|\\s")+"\\s","g"),i=" "+$(n)[0].className+" ";t.test(i);)i=i.replace(t," ");$(n)[0].className=$.trim(i)}e.preventDefault();var a=t.uiToggleClass.split(","),o=t.target&&t.target.split(",")||Array(n),r=0;angular.forEach(a,function(e){var n=o[o.length&&r];e.indexOf("*")!==-1&&i(e,n),$(n).toggleClass(e),r++}),$(n).toggleClass("active")})}}}]);