var view={loading_dialog:null,loading_num:0};view.dialog=function(t){var e=t.title||T("dialog.DIALOG"),i=t.content||"",a=t.ok_btn,n=t.cancel_btn,s=t.close_btn,o=t.ok_fn||null,r=t.cancel_fn||null,l=t.pre_fn||null,c=null,d='<div class="modal fade">            <div class="modal-dialog">            <div class="modal-content">            <div class="modal-header">            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>        <h4 class="modal-title">'+e+'</h4>            </div>            <div class="modal-body">'+i+'</div>            <div class="modal-footer">';return n&&(d+='<button type="button" class="btn btn-default dialog_btn cancel">'+T("button.CANCEL")+"</button>"),a&&(d+='<button type="button" class="btn btn-primary dialog_btn ok">'+T("button.OK")+"</button>"),s&&(d+='<button type="button" class="btn btn-primary dialog_btn ok">'+T("button.CLOSE")+"</button>"),d+="</div></div></div></div>",c=$(d),c.on("show.bs.modal",function(e){if(t.width){var i={width:t.width+"px"};$(this).children(".modal-dialog").css(i)}l&&l($(this))}).on("shown.bs.modal",function(t){}).on("hide.bs.modal",function(t){}).on("hidden.bs.modal",function(t){c.remove()}).on("click",".dialog_btn",function(){$(this).hasClass("ok")&&o&&o(),$(this).hasClass("cancel")&&(r&&r(),c.modal("hide")),t.prevent_auto_hide&&0!=t.prevent_auto_hide||c.modal("hide")}).on("shown",function(){l&&l($(this))}).modal("show"),c.close=function(){$(this).modal("hide")},c},view.loading=function(){if(null==view.loading_dialog){var t={title:T("dialog.ALERT"),content:"<img src='img/loading.gif'/> <span style='font-size: 18px;'>"+T("dialog.LOADING")+"</span>",ok_btn:!1,cancel_btn:!1};view.loading_dialog=view.dialog(t)}view.loading_num++},view.close_loading=function(){view.loading_num--,null!=view.loading_dialog&&0==view.loading_num&&(view.loading_dialog.close(),view.loading_dialog=null)},view.alert=function(t,e){var i={title:T("dialog.ALERT"),content:""+t,close_btn:!0,ok_fn:e};return view.dialog(i)},view.show=function(t,e,i,a,n){var s={title:T("dialog.ALERT"),content:"<p style='word-wrap:break-word'>"+t+"</p>",close_btn:!0,ok_fn:a,cancel_fn:n};return void 0!=e&&(s.title=e),void 0!=i&&(s.width=i),view.dialog(s)},view.confirm=function(t,e,i){var a={title:T("dialog.ALERT"),content:'<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"> '+t+"</span>",ok_btn:!0,cancel_btn:!0,ok_fn:e,cancel_fn:i};return view.dialog(a)},view.prompt=function(t,e,i,a){var n=function(){var t=$("#prompt_input").val();i(t)},s='<input type="text" class="form-control" id="prompt_input">';null!=e&&void 0!=e&&(s='<input type="text" class="form-control" id="prompt_input" value="'+e+'">');var o={title:t,content:s,ok_btn:!0,cancel_btn:!0,ok_fn:n,cancel_fn:a};return view.dialog(o)},view.prompt_time=function(t,e,i){var a=function(){var t=$("#prompt_input").val();e(t)},n={title:t,content:'<input type="text" class="form-control" data-date-format="yyyy-mm-dd hh:ii:ss" id="prompt_input">',ok_btn:!0,cancel_btn:!0,ok_fn:a,cancel_fn:i};return view.dialog(n)},view.prompt_textarea=function(t,e,i,a){a=a||"";var n=function(){var t=$("#prompt_input").val();e(t)},s={title:t,content:'<textarea class="form-control" id="prompt_input">'+a+"</textarea>",ok_btn:!0,cancel_btn:!0,ok_fn:n,cancel_fn:i};return view.dialog(s)};var utils={};utils.exportExcel=function(t,e,i){if(t){"string"==typeof t&&(t={}),t.export=1;var a=[];$.each(t,function(t,e){void 0!=e&&a.push('<input type="hidden" name="'+t+'" value="'+e+'" />')}),$(document).off("submit"),$('<form id="download" action="'+(e||"index.php")+'" method="'+(i||"post")+'" target="_blank">'+a.join("")+"</form>").appendTo("body").submit().remove(),$(document).on("submit",!1)}},utils.base64ToBlob=function(t,e){e=e||"";for(var i=1024,a=atob(t),n=a.length,s=Math.ceil(n/i),o=new Array(s),r=0;r<s;++r){for(var l=r*i,c=Math.min(l+i,n),d=new Array(c-l),h=l,u=0;h<c;++u,++h)d[u]=a[h].charCodeAt(0);o[r]=new Uint8Array(d)}return new Blob(o,{type:e})},angular.module("httpService",[]).service("httpService",["$document","$q","$timeout","$http","$state",function(t,e,i,a,n){this.post=function(t,i,s){var o=e.defer();s=s||{};var r=void 0==s.loading||s.loading;1==r&&view.loading();var l=void 0==s.alertError||s.alertError;return a.post(t,i).then(function(t){1==r&&view.close_loading();var e=t.data;if(0==e.status)o.resolve(e);else switch(e.status){case 1:1==l&&view.alert(e.msg),o.reject(e);break;case 2:1==l&&view.alert(e.msg),session.init(),n.go("login");break;case 3:1==l&&view.alert(e.msg),n.go("app.game_select");break;case 4:1==l&&view.alert(e.msg),o.reject(e);break;default:1==l&&view.alert(e.msg),o.reject(e)}},function(t){1==r&&view.close_loading(),1==l&&view.alert(T("tips.SYSTEM_ERROR")),o.reject(T("tips.SYSTEM_ERROR"))}),o.promise}}]),angular.module("app").constant("JQ_CONFIG",{easyPieChart:["libs/jquery/charts/easypiechart/jquery.easy-pie-chart.js"],plot:["libs/jquery/charts/flot/jquery.flot.min.js","libs/jquery/charts/flot/jquery.flot.resize.js","libs/jquery/charts/flot/jquery.flot.tooltip.min.js","libs/jquery/charts/flot/jquery.flot.spline.js","libs/jquery/charts/flot/jquery.flot.orderBars.js","libs/jquery/charts/flot/jquery.flot.pie.min.js"],chosen:["libs/jquery/chosen/chosen.jquery.min.js","libs/jquery/chosen/chosen.css"],treeview:["vendor/bootstrap-treeview/dist/bootstrap-treeview.min.js","vendor/bootstrap-treeview/dist/bootstrap-treeview.min.css"]}).config(["$ocLazyLoadProvider",function(t){t.config({debug:!1,events:!0,modules:[{name:"ui.select",files:["vendor/ui-select/dist/select.min.js","vendor/ui-select/dist/select.min.css"]},{name:"angularFileUpload",files:["vendor/angular-file-upload/angular-file-upload.min.js"]},{name:"ngImgCrop",files:["vendor/ng-img-crop/compile/minified/ng-img-crop.js","vendor/ng-img-crop/compile/minified/ng-img-crop.css"]},{name:"chosen",files:["libs/jquery/chosen/chosen.jquery.min.js","libs/jquery/chosen/chosen.css"]}]})}]),angular.module("ui.button",[]).service("uiButton",["$document","$q","$timeout","$translate",function(t,e,i,a){var n={add:["btn-info","fa fa-plus","button.ADD"],edit:["btn-info","fa fa-edit","button.EDIT"],delete:["btn-warning","fa fa-trash","button.DELETE"],view:["btn-info","fa fa-list","button.VIEW"],sync:["btn-info","fa fa-repeat","button.SYNC"],query:["btn-info","fa fa-search","button.QUERY"],search:["btn-info","fa fa-search","button.SEARCH"],reply:["btn-info","fa fa-search","button.REPLY"],edit_icon:["btn-info","fa fa-edit","menu.action.EDIT_ICON"]};return this.sm=function(t){var e=n[t];return void 0==e&&(e=["btn-info","fa fa-info","button.OPERATOR"]),'<button class="btn btn-sm '+e[0]+'"><i class="'+e[1]+'"></i> '+a.instant(e[2])+"</button>"},this}]),angular.module("ui.load",[]).service("uiLoad",["$document","$q","$timeout",function(t,e,i){var a=[],n=!1,s=e.defer();this.load=function(t){t=angular.isArray(t)?t:t.split(/\s+/);var e=this;return n||(n=s.promise),angular.forEach(t,function(t){n=n.then(function(){return t.indexOf(".css")>=0?e.loadCSS(t):e.loadScript(t)})}),s.resolve(),n},this.loadScript=function(n){if(a[n])return a[n].promise;var s=e.defer(),o=t[0].createElement("script");return o.src=n,o.onload=function(t){i(function(){s.resolve(t)})},o.onerror=function(t){i(function(){s.reject(t)})},t[0].body.appendChild(o),a[n]=s,s.promise},this.loadCSS=function(n){if(a[n])return a[n].promise;var s=e.defer(),o=t[0].createElement("link");return o.rel="stylesheet",o.type="text/css",o.href=n,o.onload=function(t){i(function(){s.resolve(t)})},o.onerror=function(t){i(function(){s.reject(t)})},t[0].head.appendChild(o),a[n]=s,s.promise}}]),angular.module("ui.ms2select",[]).service("uiMs2select",["$document","$q","$timeout","httpService",function(t,e,i,a){this.config=function(t,e){return this.el=t,this.$el=$(t),this.params=e,this.render=function(){var t=this,e=t._createMs2select();return t.$el.html(e).on("click",".move",$.proxy(t.move,t)).on("click",".opt",$.proxy(t.opt,t)),this.leftSelect(),this.rightSelect(),t},this.opt=function(t){t.preventDefault();var i=$(t.target);(i.hasClass("addOne")||i.parent().hasClass("addOne"))&&this.addOne(e.$scope),(i.hasClass("removeOne")||i.parent().hasClass("removeOne"))&&this.removeOne(e.$scope)},this.move=function(t){t.preventDefault();var e=$(t.target);(e.hasClass("moveTop")||e.parent().hasClass("moveTop"))&&this.moveTop(),(e.hasClass("moveUp")||e.parent().hasClass("moveUp"))&&this.moveUp(),(e.hasClass("moveDown")||e.parent().hasClass("moveDown"))&&this.moveDown(),(e.hasClass("moveBottom")||e.parent().hasClass("moveBottom"))&&this.moveBottom()},this._createMs2select=function(){var t=this._createSelect(this.params.leftHead,this.params.leftData,"leftSel"),e=this._createSelect(this.params.rightHead,this.params.rightData,"rightSel"),i='<div class="left options" style="padding-top:180px;">                    <p title="添加"><button  class="btn btn-default opt addOne" disabled="disabled"><i class="fa fa-chevron-right"></i></button></p>                    <p title="移除"><button  class="btn btn-default opt removeOne" disabled="disabled"><i class="fa fa-chevron-left"></i></button></p>                    </div>',a='<div class="left options" style="padding-top: 125px;">                    <p title="移至顶部"><button class="btn btn-default move moveTop" disabled="disabled"><i class="fa fa-caret-square-o-up"></i></button></p>                    <p title="上移"><button class="btn btn-default move moveUp" disabled="disabled"><i class="fa  fa-chevron-up"></i></button></p>                    <p title="下移"><button  class="btn btn-default move moveDown" disabled="disabled"><i class="fa fa-chevron-down"></i></button></p>                    <p title="移至底部"><button  class="btn btn-default move moveBottom" disabled="disabled"><i class="fa fa-caret-square-o-down"></i></button></p>                    </div>';return t+i+e+a},this._createSelect=function(t,e,i){var a='<div class="ms2select"><h4>'+t+'</h4><select id="'+i+'" multiple="multiple" class="form-control">';for(var n in e)a+='<option value="'+e[n].id+'">'+e[n].text+"</option>";return a+="</select></div>"},this.leftSelect=function(){$("#leftSel").on("change",function(t){null!=$(this).val()&&""!=$(this).val()?$(".addOne").prop("disabled",!1):$(".addOne").prop("disabled",!0)})},this.rightSelect=function(){$("#rightSel").on("change",function(t){if(null!=$(this).val()&&""!=$(this).val()){$(".removeOne").prop("disabled",!1);var e=[],i=$(this).children().length;$("#rightSel option:selected").each(function(){e.push($(this).index())}),e&&(e.indexOf(0)<0?($(".moveUp").prop("disabled",!1),$(".moveTop").prop("disabled",!1)):($(".moveUp").prop("disabled",!0),$(".moveTop").prop("disabled",!0)),e.indexOf(i-1)<0?($(".moveDown").prop("disabled",!1),$(".moveBottom").prop("disabled",!1)):($(".moveDown").prop("disabled",!0),$(".moveBottom").prop("disabled",!0)))}else $(".removeOne").prop("disabled",!0),$(".move").prop("disabled",!0)})},this.addOne=function(){var t=this.getValue(),i=$("#leftSel option:selected");if(t.length>=e.maxLength||t.length+i.length>e.maxLength)return view.alert("右侧选项不能超过"+e.maxLength),!1;var a=$("#rightSel");a.append(i),$("#leftSel").trigger("change"),$("#rightSel").trigger("change")},this.removeOne=function(){var t=$("#rightSel option:selected"),e=$("#leftSel");e.append(t),$("#leftSel").trigger("change"),$("#rightSel").trigger("change")},this.moveUp=function(){$("#rightSel option:selected").each(function(){$(this).insertBefore($(this).prev("option"))}),$("#rightSel").trigger("change")},this.moveTop=function(){var t=$("#rightSel option:selected");console.log(t.index()),t.insertBefore($("#rightSel option:first")),$("#rightSel").trigger("change")},this.moveDown=function(){for(var t=$("#rightSel option:selected"),e=t.length-1;e>=0;e--){var i=$(t[e]);i.insertAfter(i.next("option"))}$("#rightSel").trigger("change")},this.moveBottom=function(){var t=$("#rightSel option:selected");t.insertAfter($("#rightSel option:last")),$("#rightSel").trigger("change")},this.getValue=function(){var t=[];return $("#rightSel option").each(function(){t.push($(this).val())}),t},this.render(),this}}]),angular.module("ui.table",[]).service("uiTable",["$document","$q","$timeout","httpService",function(t,e,i,a){this.config=function(t,i){return this.el=t,this.$el=$(t),this.options=i,this.params={},this.conf={page:1,size:10,sort:{}},this.listening=!1,this.button_fn=[],this.render=function(){function t(){var t=e._createTable();return 1==e.listening?void e.$el.html(t):(e.listening=!0,void e.$el.html(t).off("click","tr .table_action").on("click","tr .table_action",function(t){var i=$(this).index(),a=$(this).parents("tr"),n=a.index(),s=e.getRecord(n);e.button_fn[i]&&e.button_fn[i](s,a,e)}).off("click","#Pagination li a").on("click","#Pagination li a",function(t){t.preventDefault();var i=$(this).attr("page");e.changePage(i)}).on("change","#sizeSelect",function(t){t.preventDefault();var i=$(this).children("option:selected").val();e.changeSize(i)}).off("click","th").on("click","th",function(t){if(void 0!=$(this).attr("data")){t.preventDefault();var i=$(this).attr("data");$.inArray(i,e.sorts)!=-1&&($(this).hasClass("sorting")?($(this).removeClass("sorting"),$(this).addClass("sorting_asc"),e.changeSort(i,"asc")):$(this).hasClass("sorting_asc")?($(this).removeClass("sorting_asc"),$(this).addClass("sorting_desc"),e.changeSort(i,"desc")):($(this).removeClass("sorting_desc"),$(this).addClass("sorting"),e.changeSort(i,"none")))}}).on("change",".table_check_all",function(t){var e=$(this).is(":checked");$(".table_check").each(function(t){this.checked=e})}).off("click","tbody tr").on("click","tbody tr",function(){var t=$(this).find(".table_check"),e=t.is(":checked");$(this).find(".table_check").each(function(){this.checked=!e})}))}var e=this,i=this._getData();return i.then(function(i){e.data=i,t()}),e},this.setParams=function(t){return this.params=t,this},this.setConf=function(t,e){return this.conf[t]=e,this},this.getData=function(){return this.data},this.getRecord=function(t){return this.data.list[t]},this.changePage=function(t){this.setConf("page",parseInt(t)),this.render()},this.changeSize=function(t){this.setConf("page",1),this.setConf("size",parseInt(t)),this.render()},this.changeSort=function(t,e){this.data=null,"none"==e&&void 0!=this.conf.sort[t]?delete this.conf.sort[t]:this.conf.sort[t]=e,this.render()},this.multi=function(t){var e=[];return $(".table_check").each(function(t){this.checked&&e.push(this.value)}),0==e.length?void view.alert(T("tips.NOT_SELECT_RECORD")):void t(e)},this._init=function(t){this.conf=$.extend(this.conf,t.conf||[]),this.data=t.data||null,this.buttons=t.buttons||[],this.fields=t.fields||[],this.sorts=t.sorts||[],this.hide_id=t.hide_id||!1,this.hide_check=t.hide_check||!1,this.format=t.format||null},this._getData=function(){var t=e.defer();return a.post(this.conf.url,$.extend({},this.params,this.conf)).then(function(e){t.resolve(e.data)},function(e){t.reject(e)}),t.promise},this._createTable=function(){var t='<div class="table-responsive"><table class="table table-bordered table-hover table-striped">';return t+=this._createHead(),t+=this._createBody(),t+="</table></div>",t+=this._createPageList()},this._createHead=function(){var t="<thead><tr>";void 0!=this.fields.id&&1!=this.hide_check&&(t+='<th style="width:20px;"><label class="i-checks m-b-none"><input type="checkbox" class="table_check_all"><i></i></label></th>'),this.buttons.length>0&&(t+="<th>"+T("page.OPERATION")+"</th>");for(var e in this.fields)if("id"!=e||1!=this.hide_id){var i=this.fields[e];t+=$.inArray(e,this.sorts)==-1?'<th data="'+e+'">'+T(i)+"</th>":void 0==this.conf.sort[e]?'<th data="'+e+'" class="sorting">'+T(i)+"</th>":"asc"==this.conf.sort[e]?'<th data="'+e+'" class="sorting_asc">'+T(i)+"</th>":'<th data="'+e+'" class="sorting_desc">'+T(i)+"</th>"}return t+="</tr></thead>"},this._createBody=function(){var t="<tbody>",e="<tr>";if(void 0!=this.fields.id&&1!=this.hide_check&&(e+='<td><label class="i-checks m-b-none"><input class="table_check" name="ids[]" value="%{id}%" type="checkbox"><i></i></label>'),this.buttons.length>0){e+="<td>";for(var i in this.buttons){var a=this.buttons[i];0!=session.checkAuth(a.action)&&(void 0==a.icon&&(a.icon="glyphicon glyphicon-edit"),e+='<i class="table_action '+a.icon+'" style="margin-right:2px;" title="'+T(a.text)+'"></i> ',this.button_fn.push(a.fn))}e+="</td>"}for(var i in this.fields)"id"==i&&1==this.hide_id||(e+="<td>%{"+i+"}%</td>");e+="</tr>";for(var i in this.data.list){var n=this.data.list[i];this.format&&this.format(n,this,i),t+=i+1<this.buttons.length||this.data.list.length-i>this.buttons.length?this._setValue(e.replace("dropup",""),n):this._setValue(e,n)}return t+="</tbody>"},this._createPageList=function(){if(void 0==this.data.list||0==this.data.list.length)return"";this.conf.page=this.conf.page>0?this.conf.page:1,this.conf.size=this.conf.size>0?this.conf.size:10,this.data.total=this.data.total>=0?this.data.total:0;var t={page:this.conf.page||1,size:this.conf.size||10,total:this.data.total||0,count:0,start:(this.conf.page-1)*this.conf.size+1,end:this.conf.page*this.conf.size,page_total:Math.ceil(this.data.total/this.conf.size)};t.count=void 0!=this.data.list?this.data.list.length:0,t.end=t.end>=t.start+t.count?t.start+t.count-1:t.end,t.total=t.total>=t.count?t.total:t.count,t.page_total=t.page_total>0?t.page_total:1;var e=[10,25,50,100],i='<div class="row"><div class="col-sm-3 hidden-xs"><select class="input-xs form-control w-xs inline v-middle" id="sizeSelect">';for(var a in e){var n=e[a];i+=n==this.conf.size?'<option value="'+n+'" selected>'+n+"</option>":'<option value="'+n+'">'+n+"</option>"}i+="</select></div>";var s=3,o='<div class="col-sm-6 text-center text-center-xs"><ul class="pagination pagination-md m-t-none m-b-none" id="Pagination">';if(t.page>s+1){o+='<li><a href="javascript:void(0);" page="1">'+T("page.FIRST")+"</a></li>";var r=t.page-1>0?t.page-1:1;o+='<li><a href="javascript:void(0);" page="'+r+'"><i class="fa fa-chevron-left"></i></a></li>'}var l=t.page-s>0?t.page-s:1,c=t.page+s<=t.page_total?t.page+s:t.page_total;for(a=l;a<=c;a++)o+=a==t.page?'<li class="active"><a href="javascript:void(0);" page="'+a+'">'+a+"</a></li>":'<li><a href="javascript:void(0);" page="'+a+'">'+a+"</a></li>";if(t.page_total>t.page+s){var d=t.page+1<=t.page_total?t.page+1:t.page_total;o+='<li><a href="javascript:void(0);" page="'+d+'"><i class="fa fa-chevron-right"></i></a></li>',o+='<li><a href="javascript:void(0);" page="'+t.page_total+'">'+T("page.LAST")+"</a></li>"}return o+="</ul></div>",i+=o,i+=this._setValue('<div class="col-sm-3 text-right text-center-xs"><small class="text-muted inline m-t-sm m-b-sm">'+T("page.STR")+"</small></div>",t),i+="</div>"},this._setValue=function(){var t=arguments;return t[0].replace(/%\{(.*?)}%/g,function(e,i){return function(t,e){var i=/\W+/.test(e[0])?parseInt(e[0]):e[0];return e.length>1?arguments.callee(t[i]||{},e.slice(1)):null!=t?void 0!=t[i]||null!=t[i]?t[i]:"":void 0}("object"==typeof t[1]?t[1]:t,i.split(/\.|\[|\]\[|\]\./))})},this._init(i),this}}]),angular.module("ui.tree",[]).service("uiTree",["$document","$q","$timeout",function(t,e,i){this.config=function(t,e,i){return this.el=t,this.$el=$(t),this.data=e,this.map=[],this.options=i,this._html=$('<ul class="list-group"></ul>'),this.render=function(){var t=this;this.$el.addClass("ui-tree"),this.tree=this._buildTree(this._html,this.data,0,-1),this.$el.html(this._html).off("click",".expand-icon").on("click",".expand-icon",$.proxy(t.toggleNodeExpanded,t)).off("click",".check-icon").on("click",".check-icon",$.proxy(t.toggleNodeChecked,t))},this.getCheckTags=function(){var t=[];for(var e in this.map){var i=this.map[e];i.state.checked>0&&t.push(e)}return t},this._buildTree=function(t,e,i,a){for(var n in e){var s=e[n];s.parent=a,s.level=i,s.html=this._buildNodeHtml(s,i),t.append(s.html),this._refreshNodeState(s),this.map[s.tags]=s,void 0!=s.nodes?this._buildTree(t,s.nodes,i+1,s.tags):(this._removeNodeExpanded(s),this._cascadeUpChecked(s))}},this._buildNodeHtml=function(t,e){for(var i='<li class="list-group-item ui-tree-node node-checked" node-id="'+t.tags+'">',a=0;a<e;a++)i+='<span class="indent"></span>';i+='<span class="icon expand-icon fa fa-plus-square"></span>',i+='<span class="icon check-icon fa fa-square-o"></span>',i+=t.text,i+="</li>";var n=$(i);return 0!=e&&n.hide(),n},this.getNode=function(t){return this.map[t]},this.toggleNodeExpanded=function(t){t.preventDefault();var e=$(t.target),i=this._findTargetNode(e);void 0!=i&&(i.state.expanded=!i.state.expanded,this._nodeExpanded(i),this._cascadeDownExpanded(i))},this.toggleNodeChecked=function(t){t.preventDefault();var e=$(t.target),i=this._findTargetNode(e);void 0!=i&&(1==i.state.checked?i.state.checked=0:i.state.checked=1,this._nodeChecked(i),this._cascadeUpChecked(i),this._cascadeDownChecked(i))},this._cascadeUpChecked=function(t){if(t.parent!=-1){var e=this.getNode(t.parent);this._parentChecked(e),this._cascadeUpChecked(e)}},this._parentChecked=function(t){var e=0,i=0;for(var a in t.nodes){var n=t.nodes[a];void 0!=n.state&&(1==n.state.checked&&e++,2==n.state.checked&&i++)}i>0?t.state.checked=2:e==t.nodes.length?t.state.checked=1:0==e?t.state.checked=0:t.state.checked=2,this._nodeChecked(t)},this._cascadeDownChecked=function(t){if(void 0!=t.nodes&&0!=t.nodes.length)for(var e in t.nodes){var i=t.nodes[e];i.state.checked=t.state.checked,this._nodeChecked(i),this._cascadeDownChecked(i)}},this._cascadeDownExpanded=function(t){if(void 0!=t.nodes&&0!=t.nodes.length)for(var e in t.nodes){var i=t.nodes[e];1==t.state.expanded?(i.html.show(),i.state.expanded=!1):(i.html.hide(),i.state.expanded=!1),this._nodeExpanded(i),0==t.state.expanded&&this._cascadeDownExpanded(i)}},this._findTargetNode=function(t){var e=t.parents(".ui-tree-node");if(void 0!=e){var i=e.attr("node-id");return this.getNode(i)}},this._refreshNodeState=function(t){void 0==t.state&&(t.state={checked:!1,expanded:!1}),t.state.expanded=void 0!=t.state.expanded&&t.state.expanded,1==t.state.checked?t.state.checked=1:t.state.checked=0,this._nodeChecked(t),this._nodeExpanded(t)},this._nodeChecked=function(t){var e=t.html.find(".check-icon");if(void 0!=e){e.removeClass("fa-check-square-o"),e.removeClass("fa-square-o"),e.removeClass("fa-check-square");var i="fa-check-square-o";switch(t.state.checked){case 0:i="fa-square-o";break;case 2:i="fa-check-square"}e.addClass(i)}},this._nodeExpanded=function(t){var e=t.html.find(".expand-icon");if(void 0!=e){e.removeClass("fa-plus-square"),e.removeClass("fa-minus-square");var i=1==t.state.expanded?"fa-minus-square":"fa-plus-square";e.addClass(i)}},this._removeNodeExpanded=function(t){var e=t.html.find(".expand-icon");void 0!=e&&e.remove()},this.render(),this}}]);